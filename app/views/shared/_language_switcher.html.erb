<div class="relative" data-controller="dropdown" data-action="click@window->dropdown#hide">
  <button type="button" 
          class="flex items-center text-sm font-medium text-gray-600 hover:text-indigo-600 transition-colors"
          data-action="click->dropdown#toggle">
    <svg class="w-4 h-4 <%= rtl_locale? ? 'ml-1' : 'mr-1' %>" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.017 18l-3.5-7 3.5-7" />
    </svg>
    <span class="uppercase"><%= current_locale %></span>
    <svg class="w-3 h-3 <%= rtl_locale? ? 'mr-1' : 'ml-1' %>" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  
  <div class="<%= rtl_locale? ? 'origin-top-left absolute left-0' : 'origin-top-right absolute right-0' %> mt-2 w-32 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden" 
       data-dropdown-target="menu">
    <% available_locales.each do |locale| %>
      <%= link_to switch_locale_path(locale), 
          class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 #{'bg-indigo-50 text-indigo-700' if current_locale == locale}" do %>
        <div class="flex items-center">
          <span class="uppercase font-medium"><%= locale %></span>
          <% if locale == :en %>
            <span class="<%= rtl_locale? ? 'mr-2' : 'ml-2' %> text-xs">ðŸ‡ºðŸ‡¸</span>
          <% elsif locale == :ar %>
            <span class="<%= rtl_locale? ? 'mr-2' : 'ml-2' %> text-xs">ðŸ‡¸ðŸ‡¦</span>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
